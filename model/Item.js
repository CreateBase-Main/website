/*=========================================================================================
REQUIRED MODULES
=========================================================================================*/

const mongoose = require("mongoose");

/*=========================================================================================
VARIABLES
=========================================================================================*/

const Schema = mongoose.Schema;

/*=========================================================================================
CREATE ITEM MODEL
=========================================================================================*/

const ItemSchema = new Schema({
  accountId: {
    type: Schema.Types.ObjectId,
  },
  status: {
    type: String,
  },
});

/*=========================================================================================
STATIC
=========================================================================================*/

// @FUNC  findByAccountIdAndStatus
// @TYPE  STATICS
// @DESC
// @ARGU
ItemSchema.statics.findByAccountIdAndStatus = function (accountId, status) {
  return new Promise(async (resolve, reject) => {
    let items;

    try {
      items = await this.find({ accountId, status });
    } catch (error) {
      reject(error);
    }

    resolve(items);
  });
};

/*=========================================================================================
EXPORT ITEM MODEL
=========================================================================================*/

module.exports = Item = mongoose.model("items", ItemSchema);

/*=========================================================================================
END
=========================================================================================*/
