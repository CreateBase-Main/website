/*=========================================================================================
REQUIRED MODULES
=========================================================================================*/

const mongoose = require("mongoose");
const moment = require("moment-timezone");

/*=========================================================================================
GRIDFS
=========================================================================================*/

/*=========================================================================================
VARIABLES
=========================================================================================*/

const Schema = mongoose.Schema;

/*=========================================================================================
MODELS
=========================================================================================*/

/*=========================================================================================
CREATE MAILING MODEL
=========================================================================================*/

const MailSchema = new Schema({
  accountId: {
    type: Schema.Types.ObjectId,
  },
  email: {
    type: String,
  },
});

/*=========================================================================================
STATIC
=========================================================================================*/

// @FUNC  findByEmail
// @TYPE  STATICS
// @DESC
// @ARGU
MailSchema.statics.findByEmail = function (email) {
  return new Promise(async (resolve, reject) => {
    let mail;

    try {
      mail = await this.findOne({ email });
    } catch (error) {
      reject(error);
    }

    resolve(mail);
  });
};

// @FUNC  deleteMail
// @TYPE  STATICS
// @DESC
// @ARGU
MailSchema.statics.deleteMail = function (email) {
  return new Promise(async (resolve, reject) => {
    try {
      await this.deleteOne({ email });
    } catch (error) {
      reject(error);
    }
    resolve("success");
  });
};

/*=========================================================================================
METHOD
=========================================================================================*/

/*=========================================================================================
EXPORT MAIL MODEL
=========================================================================================*/

module.exports = Mail = mongoose.model("mail", MailSchema);

/*=========================================================================================
END
=========================================================================================*/
