/*=========================================================================================
REQUIRED MODULES
=========================================================================================*/

const express = require("express");

/*=========================================================================================
VARIABLES
=========================================================================================*/

const router = new express.Router();

/*=========================================================================================
MODELS
=========================================================================================*/

const Account = require("../../model/Account.js");

/*=========================================================================================
MIDDLEWARE
=========================================================================================*/

const restrictedAccess = (req, res, next) => {
  if (req.isAuthenticated()) {
    if (req.user.verification.status) {
      return next();
    } else {
      return res.redirect("/verification");
    }
  } else {
    return res.redirect("/login");
  }
};

/*=========================================================================================
ROUTES
=========================================================================================*/

/*-----------------------------------------------------------------------------------------
GENERAL
-----------------------------------------------------------------------------------------*/

// @route     Get /login-status
// @desc      Get the Login Status
// @access    Public
router.get("/login-status", (req, res) => {
  if (req.isAuthenticated()) return res.send({ status: true });

  res.send({ status: false });
});

/*-----------------------------------------------------------------------------------------
SIGNUP
-----------------------------------------------------------------------------------------*/

// @route     Get /signup/check/email
// @desc      Validate email
// @access    Public
router.get("/signup/check/email", (req, res) => {
  Account.fineOne({ email: req.body }, (err, user) => { });
});

/*=========================================================================================
EXPORT ROUTE
=========================================================================================*/

module.exports = router;

/*=========================================================================================
END
=========================================================================================*/
