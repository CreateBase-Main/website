let make={currentPage:0,pages:["upload","build-type","build-options","order-details","complete"],materials:{fdm:["pla","abs","petg"]},button:{upload:{next:void 0},buildType:{quick:{prototype:void 0,mechanical:void 0},next:void 0},buildOptions:{next:void 0},orderDetails:{next:void 0},complete:{next:void 0}},heading:{upload:void 0,buildType:void 0,buildOptions:void 0,orderDetails:void 0,complete:void 0},validation:{upload:void 0,buildType:void 0,buildOptions:void 0,orderDetails:void 0,complete:void 0,select:void 0,deselect:void 0,valid:void 0,invalid:void 0,enable:void 0,disable:void 0},initialise:(void 0,async()=>{updateSessionPage(),make.declareVariables();try{await global.initialise(!0,!1)}catch(e){return}removeLoader(!1),make.heading.upload.addEventListener("click",make.upload.show),make.validation.upload.addEventListener("click",make.upload.show)}),declareVariables:(void 0,()=>{make.button.upload.next=document.querySelector("#make-upload-next"),make.button.buildType.quick.prototype=document.querySelector("#make-prototype-build-input"),make.button.buildType.quick.mechanical=document.querySelector("#make-mechanical-build-input"),make.button.buildType.next=document.querySelector("#make-build-type-next"),make.button.buildOptions.next=document.querySelector("#make-build-options-next"),make.button.orderDetails.next=document.querySelector("#make-order-details-next"),make.button.complete.next=document.querySelector("#make-complete-next"),make.heading.upload=document.querySelector("#make-upload-heading"),make.heading.buildType=document.querySelector("#make-build-type-heading"),make.heading.buildOptions=document.querySelector("#make-build-options-heading"),make.heading.orderDetails=document.querySelector("#make-order-details-heading"),make.heading.complete=document.querySelector("#make-complete-heading"),make.validation.upload=document.querySelector("#make-upload-validation"),make.validation.buildType=document.querySelector("#make-build-type-validation"),make.validation.buildOptions=document.querySelector("#make-build-options-validation"),make.validation.orderDetails=document.querySelector("#make-order-details-validation"),make.validation.complete=document.querySelector("#make-complete-validation")}),collect:(void 0,()=>{let e=new FormData(document.querySelector("#make-inputs"));const t=document.querySelector("#make-quantity").value;e.append("quantity",t);const a=document.querySelector("#make-note").value;return e.append("note",a),e}),inspect:(void 0,()=>{const e=make.collect();for(let t of e.entries());}),submit:(void 0,async()=>{make.complete.validation.invalid();if(!make.complete.validation.validate().valid)return;const e=make.collect();let t;document.querySelector("#make-complete-submit-message").classList.add("hide"),document.querySelector("#make-complete-submit-icon").classList.add("hide"),document.querySelector("#make-complete-processing-message").classList.remove("idle"),document.querySelector("#make-complete-processing-icon").classList.remove("idle"),setTimeout(()=>{document.querySelector("#make-complete-submit-message").classList.add("idle"),document.querySelector("#make-complete-submit-icon").classList.add("idle"),document.querySelector("#make-complete-submit-message").classList.remove("hide"),document.querySelector("#make-complete-submit-icon").classList.remove("hide")},500);try{t=(await axios.post("/make/build/new-model",e)).data}catch(e){t={status:"error",content:e}}"error"!==t.status&&"failed"!==t.status&&(document.querySelector("#make-complete-processing-message").classList.add("hide"),document.querySelector("#make-complete-processing-icon").classList.add("hide"),document.querySelector("#make-complete-success-icon").innerHTML='<svg class="checkmark" viewBox="0 0 52 52">\n      <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"></circle>\n      <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>\n    </svg>',document.querySelector("#make-complete-success-message").classList.remove("idle"),document.querySelector("#make-complete-success-icon").classList.remove("idle"),setTimeout(()=>{document.querySelector("#make-complete-processing-message").classList.add("idle"),document.querySelector("#make-complete-processing-icon").classList.add("idle"),document.querySelector("#make-complete-processing-message").classList.remove("hide"),document.querySelector("#make-complete-processing-icon").classList.remove("hide")},500),setTimeout(()=>make.redirect(),1500))}),redirect:void 0,upload:{change:void 0,namer:void 0,validation:{validate:void 0,valid:void 0,invalid:void 0},show:void 0},buildType:{change:void 0,quick:{select:void 0,deselect:void 0,prototype:{select:void 0,deselect:void 0,set:void 0},mechanical:{select:void 0,deselect:void 0,set:void 0}},custom:{select:void 0,deselect:void 0},validation:{validate:void 0,valid:void 0,invalid:void 0},reset:void 0,next:void 0,show:void 0},buildOptions:{material:{fdm:["pla","abs","petg"],select:void 0,deselect:void 0},quality:{selection:["draft","normal","high"],select:void 0,deselect:void 0},strength:{selection:["normal","strong","solid"],select:void 0,deselect:void 0},validation:{validate:void 0,valid:void 0,invalid:void 0},reset:void 0,show:void 0},orderDetails:{colour:{selection:{pla:["any","white","black"],abs:["any","white","black"],petg:["any","white","black"]},select:void 0,deselect:void 0,reset:void 0,show:void 0},quantity:{value:void 0,add:void 0,subtract:void 0,change:void 0},validation:{validate:void 0,valid:void 0,invalid:void 0},show:void 0},complete:{validation:{validate:void 0,valid:void 0,invalid:void 0},show:void 0},changePage:void 0,viewerProcess:void 0,viewerUpload:void 0};make.validation.select=e=>{document.querySelector(`#make-${e}-validation`).classList.add("select")},make.validation.deselect=e=>{document.querySelector(`#make-${e}-validation`).classList.remove("select")},make.validation.valid=e=>{document.querySelector(`#make-${e}-validation`).classList.add("valid"),document.querySelector(`#make-${e}-validation-icon`).innerHTML='<svg class="checkmark" viewBox="0 0 52 52">\n  <circle\n    class="checkmark__circle"\n    cx="26"\n    cy="26"\n    r="25"\n    fill="none"\n  ></circle>\n  <path\n    class="checkmark__check"\n    fill="none"\n    d="M14.1 27.2l7.1 7.2 16.7-16.8"\n  ></path>\n</svg>'},make.validation.invalid=e=>{document.querySelector(`#make-${e}-validation`).classList.remove("valid");const t=make.pages.indexOf(e);document.querySelector(`#make-${e}-validation-icon`).innerHTML=t},make.validation.enable=e=>{document.querySelector(`#make-${e}-validation`).classList.remove("disable"),"upload"===e?make.validation.upload.addEventListener("click",make.upload.show):"build-type"===e?make.validation.buildType.addEventListener("click",make.buildType.show):"build-options"===e?make.validation.buildOptions.addEventListener("click",make.buildOptions.show):"order-details"===e?make.validation.orderDetails.addEventListener("click",make.orderDetails.show):"complete"===e&&make.validation.complete.addEventListener("click",make.complete.show)},make.validation.disable=e=>{document.querySelector(`#make-${e}-validation`).classList.add("disable"),"upload"===e?make.validation.upload.removeEventListener("click",make.upload.show):"build-type"===e?make.validation.buildType.removeEventListener("click",make.buildType.show):"build-options"===e?make.validation.buildOptions.removeEventListener("click",make.buildOptions.show):"order-details"===e?make.validation.orderDetails.removeEventListener("click",make.orderDetails.show):"complete"===e&&make.validation.complete.removeEventListener("click",make.complete.show)},make.upload.change=()=>{const e=make.collect().get("file"),t=make.upload.validation.validate(!1);if(t.valid){const t=make.upload.namer(e.name);document.querySelector("#make-file-name").textContent=t,document.querySelector("#make-summary-file").textContent=t}else document.querySelector("#make-file").value="",document.querySelector("#make-file-name").textContent="No File Uploaded",document.querySelector("#make-summary-file").textContent="";document.querySelector("#make-file-error").textContent=t.message},make.upload.namer=e=>{const t=e.length;let a={first:void 0,middle:void 0,last:void 0};return a=t>20?{first:e.slice(0,8),middle:" ... ",last:e.slice(t-8)}:{first:e,middle:"",last:""},a.first+a.middle+a.last},make.upload.validation.validate=e=>{const t=make.collect().get("file");let a={valid:!0,message:""};if(!t.name)return a.valid=!1,a.message="file is required",make.upload.validation.invalid(),a;const i=t.name.split("."),l=(i[0],i[1].toUpperCase());return"STL"!==l&&"OBJ"!==l&&"3MF"!==l?(a.valid=!1,a.message="invalid file type",make.upload.validation.invalid(),a):(make.upload.validation.valid(e),a)},make.upload.validation.valid=e=>{document.querySelector("#make-build-type").classList.remove("disable"),make.button.upload.next.classList.remove("disable"),make.button.upload.next.addEventListener("click",make.buildType.show),make.heading.buildType.addEventListener("click",make.buildType.show),make.validation.valid("upload"),make.validation.enable("build-type"),e||make.buildType.validation.validate(!1)},make.upload.validation.invalid=()=>{document.querySelector("#make-build-type").classList.add("disable"),make.button.upload.next.classList.add("disable"),make.button.upload.next.removeEventListener("click",make.buildType.show),make.heading.buildType.removeEventListener("click",make.buildType.show),make.validation.invalid("upload"),make.validation.disable("build-type"),make.buildType.validation.invalid(),make.buildOptions.validation.invalid(),make.orderDetails.validation.invalid(),make.complete.validation.invalid()},make.upload.show=()=>make.changePage(0),make.buildType.change=(e,t)=>{t&&("quick"===e?(make.buildType.quick.select(),make.buildType.custom.deselect()):(make.buildType.custom.select(),make.buildType.quick.deselect()))},make.buildType.quick.select=()=>{document.querySelector("#make-quick-build-input").classList.add("select"),document.querySelector("#make-quick-build-options").classList.add("select"),make.button.buildType.quick.prototype.addEventListener("click",make.buildType.quick.prototype.select),make.button.buildType.quick.mechanical.addEventListener("click",make.buildType.quick.mechanical.select),document.querySelector("#make-summary-build-type").textContent="quick",document.querySelector("#make-summary-quick-build").textContent=""},make.buildType.quick.deselect=()=>{document.querySelector("#make-quick-build-input").classList.remove("select"),document.querySelector("#make-quick-build-options").classList.remove("select"),document.querySelector("#make-prototype-build").checked=!1,document.querySelector("#make-mechanical-build").checked=!1,make.buildType.quick.prototype.deselect(),make.buildType.quick.mechanical.deselect(),make.button.buildType.quick.prototype.removeEventListener("click",make.buildType.quick.prototype.select),make.button.buildType.quick.mechanical.removeEventListener("click",make.buildType.quick.mechanical.select),document.querySelector("#make-summary-quick-build").textContent="N/A"},make.buildType.quick.prototype.select=()=>{make.button.buildType.quick.prototype.classList.add("select"),make.buildType.quick.mechanical.deselect(),make.buildOptions.reset(),make.buildType.quick.prototype.set(),document.querySelector("#make-summary-quick-build").textContent="prototype"},make.buildType.quick.prototype.deselect=()=>{make.button.buildType.quick.prototype.classList.remove("select"),document.querySelector("#make-summary-quick-build").textContent=""},make.buildType.quick.prototype.set=()=>{document.querySelector("#make-fdm-pla-material").checked=!0,make.orderDetails.colour.show("fdm","pla"),document.querySelector("#make-draft-quality").checked=!0,document.querySelector("#make-normal-strength").checked=!0,document.querySelector("#make-summary-process").textContent="fdm",document.querySelector("#make-summary-material").textContent="pla",document.querySelector("#make-summary-quality").textContent="draft",document.querySelector("#make-summary-strength").textContent="normal",document.querySelector("#make-fdm-pla-material-input").classList.add("select"),document.querySelector("#make-draft-quality-input").classList.add("select"),document.querySelector("#make-normal-strength-input").classList.add("select"),make.buildOptions.validation.validate(!1)},make.buildType.quick.mechanical.select=()=>{make.button.buildType.quick.mechanical.classList.add("select"),make.buildType.quick.prototype.deselect(),make.buildOptions.reset(),make.buildType.quick.mechanical.set(),document.querySelector("#make-summary-quick-build").textContent="mechanical"},make.buildType.quick.mechanical.deselect=()=>{make.button.buildType.quick.mechanical.classList.remove("select")},make.buildType.quick.mechanical.set=()=>{document.querySelector("#make-fdm-petg-material").checked=!0,make.orderDetails.colour.show("fdm","petg"),document.querySelector("#make-normal-quality").checked=!0,document.querySelector("#make-strong-strength").checked=!0,document.querySelector("#make-summary-process").textContent="fdm",document.querySelector("#make-summary-material").textContent="petg",document.querySelector("#make-summary-quality").textContent="normal",document.querySelector("#make-summary-strength").textContent="strong",document.querySelector("#make-fdm-petg-material-input").classList.add("select"),document.querySelector("#make-normal-quality-input").classList.add("select"),document.querySelector("#make-strong-strength-input").classList.add("select"),make.buildOptions.validation.validate(!1)},make.buildType.custom.select=()=>{document.querySelector("#make-custom-build-input").classList.add("select"),make.buildOptions.reset(),document.querySelector("#make-summary-build-type").textContent="custom"},make.buildType.custom.deselect=()=>{document.querySelector("#make-custom-build-input").classList.remove("select")},make.buildType.validation.validate=e=>{let t={valid:!0,message:""};const a=document.querySelector("#make-quick-build").checked,i=document.querySelector("#make-custom-build").checked,l=document.querySelector("#make-prototype-build").checked,o=document.querySelector("#make-mechanical-build").checked;if(a){if(!l&&!o)return t.valid=!1,t.message="select a quick build",make.buildType.validation.invalid(),t}else if(!i)return t.valid=!1,t.message="select a build type",make.buildType.validation.invalid(),t;return make.buildType.validation.valid(e),t},make.buildType.validation.valid=e=>{document.querySelector("#make-build-options").classList.remove("disable"),make.button.buildType.next.classList.remove("disable"),make.button.buildType.next.addEventListener("click",make.buildType.next),make.heading.buildOptions.addEventListener("click",make.buildOptions.show),make.validation.valid("build-type"),make.validation.enable("build-options"),e||make.buildOptions.validation.validate(!1)},make.buildType.validation.invalid=()=>{document.querySelector("#make-build-options").classList.add("disable"),make.button.buildType.next.classList.add("disable"),make.button.buildType.next.removeEventListener("click",make.buildType.next),make.heading.buildOptions.removeEventListener("click",make.buildOptions.show),make.validation.invalid("build-type"),make.validation.disable("build-options"),make.buildOptions.validation.invalid(),make.orderDetails.validation.invalid(),make.complete.validation.invalid()},make.buildType.reset=()=>{document.querySelector("#make-quick-build").checked=!1,document.querySelector("#make-custom-build").checked=!1,document.querySelector("#make-prototype-build").checked=!1,document.querySelector("#make-mechanical-build").checked=!1,document.querySelector("#make-quick-build-input").classList.remove("select"),document.querySelector("#make-custom-build-input").classList.remove("select"),document.querySelector("#make-prototype-build-input").classList.remove("select"),document.querySelector("#make-mechanical-build-input").classList.remove("select"),make.buildType.validation.validate(!1)},make.buildType.next=()=>{const e=document.querySelector("#make-quick-build").checked,t=document.querySelector("#make-custom-build").checked;document.querySelector("#make-prototype-build").checked,document.querySelector("#make-mechanical-build").checked;e?make.orderDetails.show():t&&make.buildOptions.show()},make.buildType.show=()=>make.changePage(1),make.buildOptions.material.select=(e,t)=>{for(let e=0;e<make.buildOptions.material.fdm.length;e++)document.querySelector(`#make-fdm-${make.buildOptions.material.fdm[e]}-material-input`).classList.remove("select");document.querySelector(`#make-${e}-${t}-material-input`).classList.add("select"),make.buildType.reset(),document.querySelector("#make-custom-build").checked=!0,document.querySelector("#make-custom-build-input").classList.add("select"),document.querySelector("#make-summary-build-type").textContent="custom",document.querySelector("#make-summary-quick-build").textContent="N/A",document.querySelector("#make-summary-process").textContent=e,document.querySelector("#make-summary-material").textContent=t,make.buildType.validation.validate(!1),make.buildOptions.validation.validate(!1),make.orderDetails.colour.show(e,t)},make.buildOptions.quality.select=e=>{for(let e=0;e<make.buildOptions.quality.selection.length;e++)document.querySelector(`#make-${make.buildOptions.quality.selection[e]}-quality-input`).classList.remove("select");document.querySelector(`#make-${e}-quality-input`).classList.add("select"),make.buildType.reset(),document.querySelector("#make-custom-build").checked=!0,document.querySelector("#make-custom-build-input").classList.add("select"),document.querySelector("#make-summary-build-type").textContent="custom",document.querySelector("#make-summary-quick-build").textContent="N/A",document.querySelector("#make-summary-quality").textContent=e,make.buildType.validation.validate(!1),make.buildOptions.validation.validate(!1)},make.buildOptions.strength.select=e=>{for(let e=0;e<make.buildOptions.strength.selection.length;e++)document.querySelector(`#make-${make.buildOptions.strength.selection[e]}-strength-input`).classList.remove("select");document.querySelector(`#make-${e}-strength-input`).classList.add("select"),make.buildType.reset(),document.querySelector("#make-custom-build").checked=!0,document.querySelector("#make-custom-build-input").classList.add("select"),document.querySelector("#make-summary-build-type").textContent="custom",document.querySelector("#make-summary-quick-build").textContent="N/A",document.querySelector("#make-summary-strength").textContent=e,make.buildType.validation.validate(!1),make.buildOptions.validation.validate(!1)},make.buildOptions.validation.validate=e=>{let t={valid:!0,message:""},a=!1;for(let e=0;e<make.buildOptions.material.fdm.length;e++)document.querySelector(`#make-fdm-${make.buildOptions.material.fdm[e]}-material`).checked&&(a=!0);let i=!1;for(let e=0;e<make.buildOptions.quality.selection.length;e++)document.querySelector(`#make-${make.buildOptions.quality.selection[e]}-quality`).checked&&(i=!0);let l=!1;for(let e=0;e<make.buildOptions.strength.selection.length;e++)document.querySelector(`#make-${make.buildOptions.strength.selection[e]}-strength`).checked&&(l=!0);return a?i?l?(make.buildOptions.validation.valid(e),t):(t.valid=!1,t.message="specify strength",make.buildOptions.validation.invalid(),t):(t.valid=!1,t.message="specify quality",make.buildOptions.validation.invalid(),t):(t.valid=!1,t.message="choose a material",make.buildOptions.validation.invalid(),t)},make.buildOptions.validation.valid=e=>{document.querySelector("#make-order-details").classList.remove("disable"),make.button.buildOptions.next.classList.remove("disable"),make.button.buildOptions.next.addEventListener("click",make.orderDetails.show),make.heading.orderDetails.addEventListener("click",make.orderDetails.show),make.validation.valid("build-options"),make.validation.enable("order-details"),e||make.orderDetails.validation.validate(!1)},make.buildOptions.validation.invalid=()=>{document.querySelector("#make-order-details").classList.add("disable"),make.button.buildOptions.next.classList.add("disable"),make.button.buildOptions.next.removeEventListener("click",make.orderDetails.show),make.heading.orderDetails.removeEventListener("click",make.orderDetails.show),make.validation.invalid("build-options"),make.validation.disable("order-details"),make.orderDetails.validation.invalid(),make.complete.validation.invalid()},make.buildOptions.reset=()=>{for(let e=0;e<make.buildOptions.material.fdm.length;e++){const t=make.buildOptions.material.fdm[e];document.querySelector(`#make-fdm-${t}-material`).checked=!1,document.querySelector(`#make-fdm-${t}-material-input`).classList.remove("select")}document.querySelector("#make-summary-process").textContent="",document.querySelector("#make-summary-material").textContent="";for(let e=0;e<make.buildOptions.quality.selection.length;e++){const t=make.buildOptions.quality.selection[e];document.querySelector(`#make-${t}-quality`).checked=!1,document.querySelector(`#make-${t}-quality-input`).classList.remove("select")}document.querySelector("#make-summary-quality").textContent="";for(let e=0;e<make.buildOptions.strength.selection.length;e++){const t=make.buildOptions.strength.selection[e];document.querySelector(`#make-${t}-strength`).checked=!1,document.querySelector(`#make-${t}-strength-input`).classList.remove("select")}document.querySelector("#make-summary-strength").textContent="",make.buildOptions.validation.validate(!1)},make.buildOptions.show=()=>make.changePage(2),make.orderDetails.colour.select=(e,t,a)=>{make.orderDetails.colour.reset(),document.querySelector(`#make-${t}-${a}-colour-input`).classList.add("select"),document.querySelector(`#make-${t}-${a}-colour`).checked=!0;make.orderDetails.validation.validate(!0).valid&&make.complete.validation.valid(),document.querySelector("#make-summary-colour").textContent=a},make.orderDetails.colour.deselect=(e,t,a)=>{document.querySelector(`#make-${t}-${a}-colour-input`).classList.remove("select")},make.orderDetails.colour.reset=()=>{for(let e=0;e<make.materials.fdm.length;e++){const t=make.materials.fdm[e];for(let e=0;e<make.orderDetails.colour.selection[t].length;e++){const a=make.orderDetails.colour.selection[t][e];make.orderDetails.colour.deselect("fdm",t,a),document.querySelector(`#make-${t}-${a}-colour`).checked=!1}}document.querySelector("#make-summary-colour").textContent=""},make.orderDetails.colour.show=(e,t)=>{make.orderDetails.colour.reset();for(let e=0;e<make.materials.fdm.length;e++){const t=make.materials.fdm[e];document.querySelector(`#make-${t}-colours`).classList.add("hide-element")}document.querySelector(`#make-${t}-colours`).classList.remove("hide-element")},make.orderDetails.quantity.add=()=>{let e=Number(document.querySelector("#make-quantity").value);document.querySelector("#make-quantity").value=e+1,make.orderDetails.quantity.value=e+1,document.querySelector("#make-quantity-subtract").classList.remove("disable");make.orderDetails.validation.validate(!0).valid&&make.complete.validation.valid(),document.querySelector("#make-summary-quantity").textContent=String(make.orderDetails.quantity.value)},make.orderDetails.quantity.subtract=()=>{let e=Number(document.querySelector("#make-quantity").value);if(0===e)return;document.querySelector("#make-quantity").value=e-1,make.orderDetails.quantity.value=e-1,e-1==0&&document.querySelector("#make-quantity-subtract").classList.add("disable");make.orderDetails.validation.validate(!0).valid&&make.complete.validation.valid(),document.querySelector("#make-summary-quantity").textContent=String(make.orderDetails.quantity.value)},make.orderDetails.quantity.change=e=>{if(e<0)return void(document.querySelector("#make-quantity").value=make.orderDetails.quantity.value);make.orderDetails.quantity.value=e,0===e&&document.querySelector("#make-quantity-subtract").classList.add("disable");make.orderDetails.validation.validate(!0).valid&&make.complete.validation.valid(),document.querySelector("#make-summary-quantity").textContent=String(e)},make.orderDetails.validation.validate=e=>{let t={valid:!0,message:""},a=!1;for(let e=0;e<make.materials.fdm.length;e++){const t=make.materials.fdm[e];for(let e=0;e<make.orderDetails.colour.selection[t].length;e++){const i=make.orderDetails.colour.selection[t][e];document.querySelector(`#make-${t}-${i}-colour`).checked&&(a=!0)}}let i=!1;return document.querySelector("#make-quantity").value>0&&(i=!0),a?i?(make.orderDetails.validation.valid(e),t):(t.valid=!1,t.message="requires quantity",make.orderDetails.validation.invalid(),make.complete.validation.invalid(),t):(t.valid=!1,t.message="choose a colour",make.orderDetails.validation.invalid(),make.complete.validation.invalid(),t)},make.orderDetails.validation.valid=e=>{document.querySelector("#make-complete").classList.remove("disable"),make.button.orderDetails.next.classList.remove("disable"),make.button.orderDetails.next.addEventListener("click",make.complete.show),make.heading.complete.addEventListener("click",make.complete.show),make.validation.valid("order-details"),make.validation.enable("complete"),e||make.complete.validation.validate()},make.orderDetails.validation.invalid=()=>{document.querySelector("#make-complete").classList.add("disable"),make.button.orderDetails.next.classList.add("disable"),make.button.orderDetails.next.removeEventListener("click",make.complete.show),make.heading.complete.removeEventListener("click",make.complete.show),make.validation.invalid("order-details"),make.validation.disable("complete"),make.complete.validation.invalid()},make.orderDetails.show=()=>make.changePage(3),make.complete.validation.validate=()=>{data={valid:!1,message:""};let e=make.upload.validation.validate(!0);if(!e.valid)return data.message=e.message,data;let t=make.buildType.validation.validate(!0);if(!t.valid)return data.message=t.message,data;if(!make.buildOptions.validation.validate(!0).valid)return data.message=t.message,data;let a=make.orderDetails.validation.validate(!0);return a.valid?(data.valid=!0,make.complete.validation.valid(),data):(data.message=a.message,data)},make.complete.validation.valid=()=>{make.button.complete.next.addEventListener("click",make.submit),make.validation.valid("complete")},make.complete.validation.invalid=()=>{make.button.complete.next.removeEventListener("click",make.submit),make.validation.invalid("complete")},make.complete.show=()=>make.changePage(4),make.changePage=e=>{const t=make.pages[e],a=make.pages[make.currentPage];if(make.currentPage!==e){if(make.currentPage<e){for(let t=make.currentPage;t<e;t++){const e=make.pages[t];document.querySelector("#make-"+e).classList.remove("hide-right"),document.querySelector("#make-"+e).classList.add("hide-left")}document.querySelector("#make-"+t).classList.remove("hide-right")}else{for(let t=e+1;t<=make.currentPage;t++){const e=make.pages[t];document.querySelector("#make-"+e).classList.remove("hide-left"),document.querySelector("#make-"+e).classList.add("hide-right")}document.querySelector("#make-"+t).classList.remove("hide-left")}document.querySelector("#make-validation-hover").classList.remove(a),document.querySelector("#make-validation-hover").classList.add(t),make.validation.select(t),make.validation.deselect(a),make.currentPage=e}},make.redirect=()=>{document.querySelector(".main-page").innerHTML='<div id="make-redirect">\n    <a class="rmv-link-css" href="/">Home</a>\n    <a class="rmv-link-css" href="/make">New Make</a>\n    <a class="rmv-link-css" href="/checkout">Go to Cart</a>\n  </div>'},make.viewerProcess=(e,t,a,i,l)=>{var o=new THREE.MeshPhongMaterial({color:15790320,specular:16316664,shininess:0,reflectivity:0}),d=new THREE.Mesh(l,o);i.add(d);var c=new THREE.Vector3;l.computeBoundingBox(),l.boundingBox.getCenter(c),d.geometry.applyMatrix4((new THREE.Matrix4).makeTranslation(-c.x,-c.y,-c.z)),d.geometry.rotateY(-Math.PI/5);var m=Math.max(l.boundingBox.max.x,l.boundingBox.max.y,l.boundingBox.max.z);e.position.z=2.5*m;var n=function(){requestAnimationFrame(n),a.update(),t.render(i,e)};n()},make.viewerUpload=e=>{const t="make-viewer";document.querySelector("#make-viewer").innerHTML="";var a=e.target.files[0],i=new FileReader;i.onload=function(e){var a=document.getElementById(t),i=new THREE.PerspectiveCamera(70,a.clientWidth/a.clientHeight,1,1e3),l=new THREE.WebGLRenderer({antialias:!0,alpha:!0});l.setSize(a.clientWidth,a.clientHeight),a.appendChild(l.domElement),window.addEventListener("resize",(function(){l.setSize(a.clientWidth,a.clientHeight),i.aspect=a.clientWidth/a.clientHeight,i.updateProjectionMatrix()}),!1);var o=new THREE.OrbitControls(i,l.domElement);o.enableDamping=!0,o.enablePan=!1,o.rotateSpeed=.4,o.dampingFactor=.1,o.enableZoom=!1;var d=new THREE.Scene;d.add(new THREE.HemisphereLight(16777215,7895160,.8));let c=(new THREE.STLLoader).parse(e.target.result);make.viewerProcess(i,l,o,d,c)},i.readAsBinaryString(a)};